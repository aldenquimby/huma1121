(function(e){var t={preload:function(t){this._preloadCount=0;return this.each(e.proxy(function(n,r){this.templatePath=e(r).attr("href");this.templateName=e(r).attr("id")||this.attr("data-templateName");if(!e(this).data("template")){e.ajax({type:"GET",url:this.templatePath,context:this,success:function(n,i,s){this._preloadCount++;e(r).data("template",n);if(t&&this._preloadCount==this.length&&e.isFunction(t))t.call(this)}})}else if(t&&n==this.length-1&&e.isFunction(t))t.call(this)},this))},render:function(n,r){if(typeof r=="undefined")throw new Error("Missing the callback attribute in Chevron render method");return this.each(function(){this.renderData=n;this.callback=r;this.templatePath=e(this).attr("href");this.templateName=e(this).attr("id")||e(this).attr("data-templateName");if(!e(this).data("template")){e.ajax({type:"GET",url:this.templatePath,success:e.proxy(t.invokeRender,this)})}else t.invokeRender.call(this,e(this).data("template"))})},renderTemplate:function(e,t){return Mustache.to_html(e,t)},invokeRender:function(n){if(!e(this).data("template"))e(this).data("template",n);var r=t.renderTemplate(n,this.renderData);if(e.isFunction(this.callback)){this.callback.call(this,r)}else if(this.callback instanceof jQuery){this.callback.html(r)}else if(typeof this.callback=="string")e(this.callback).html(r);else throw new Error("Chevron render method received an unsuported callback type")}};e.Chevron=e.fn.Chevron=function(n){var r=this;if(!r.selector)r=e("link[rel=template]");if(t[n])return t[n].apply(r,Array.prototype.slice.call(arguments,1));else if(!n)throw new Error("Chevron must receive a method to call as first argument");else throw new Error("Method "+n+" does not exist on Chevron")}})(jQuery)